{
    "schema": {
        "$schema": "http://json-schema.org/draft-04/schema#",
        "title": "Data Query DTO",
        "type": "object",
        "properties": {
            "from": {
                "type": ["integer", "null"],
                "default": "0"
            },
            "size": {
                "type": ["integer", "null"],
                "default": "100"
            },
            "terms": {
                "type": ["object", "null"],
                "additionalProperties": true
            },
            "sorts": {
                "type": ["array", "null"],
                "uniqueItems": true,
                "items": {
                    "$ref": "#/definitions/SortDTO"
                }
            },
            "returnFields": {
                "type": ["array", "null"],
                "uniqueItems": true,
                "items": {
                    "type": "string"
                }
            },
            "text": {
                "$ref": "#/definitions/TextQueryDTO"
            },
            "suggest": {
                "$ref": "#/definitions/SuggestQueryDTO"
            },
            "regexp": {
                "type": ["array", "null"],
                "uniqueItems": true,
                "items": {
                    "$ref": "#/definitions/RegexpDTO"
                }
            },
            "postFilter": {
                "type": ["object", "null"],
                "additionalProperties": true
            },
            "aggs": {
                "type": ["array", "null"],
                "uniqueItems": true,
                "items": {
                    "$ref": "#/definitions/AggsPropertiesDTO"
                }
            },
            "activityId": {
                "type": ["string", "null"]
            },
            "bbox": {
                "$ref": "#/definitions/BboxQueryDTO",
                "description": "Obtiene registros de geometrías comprendidas dentro de los límites especificados."
            },
            "precision": {
                "$ref": "#/definitions/PrecisionQueryDTO"
            },
            "qFlags": {
                "type": ["array", "null"],
                "maxItems": 11,
                "uniqueItems": true,
                "items": {
                    "type": "string"
                }
            },
            "vFlags": {
                "type": ["array", "null"],
                "maxItems": 5,
                "uniqueItems": true,
                "items": {
                    "type": "string"
                }
            },
            "dateLimits": {
                "$ref": "#/definitions/DateLimitsDTO"
            },
            "interval": {
                "type": ["string", "null"]
            },
            "z": {
                "$ref": "#/definitions/ZRangeDTO"
            },
            "value": {
                "type": ["array", "null"],
                "uniqueItems": true,
                "items": {
                    "$ref": "#/definitions/ValueQueryDTO"
                }
            }
        },
        "definitions": {
            "SortDTO": {
                "type": ["object", "null"],
                "properties": {
                    "field": {
                        "type": "string"
                    },
                    "order": {
                        "type": "string"
                    }
                },
                "required": ["field", "order"]
            },
            "TextQueryDTO": {
                "type": ["object", "null"],
                "properties": {
                    "text": {
                        "type": "string",
                        "minLength": 2
                    },
                    "searchFields": {
                        "type": "array",
                        "uniqueItems": true,
                        "items": {
                            "type": "string"
                        }
                    },
                    "highlightFields": {
                        "type": ["array", "null"],
                        "uniqueItems": true,
                        "items": {
                            "type": "string"
                        }
                    }
                },
                "required": ["text", "searchFields"]
            },
            "SuggestQueryDTO": {
                "type": ["object", "null"],
                "properties": {
                    "text": {
                        "type": "string",
                        "minLength": 2
                    },
                    "searchFields": {
                        "type": "array",
                        "uniqueItems": true,
                        "items": {
                            "type": "string"
                        }
                    },
                    "size": {
                        "type": ["integer", "null"]
                    }
                },
                "required": ["text", "searchFields"]
            },
            "RegexpDTO": {
                "type": ["object", "null"],
                "properties": {
                    "field": {
                        "type": "string"
                    },
                    "exp": {
                        "type": "string"
                    }
                },
                "required": ["field", "exp"]
            },
            "AggsPropertiesDTO": {
                "type": ["object", "null"],
                "properties": {
                    "field": {
                        "type": "string"
                    },
                    "term": {
                        "type": "string"
                    },
                    "nested": {
                        "type": ["string", "null"]
                    },
                    "size": {
                        "type": ["integer", "null"],
                        "default": "20"
                    },
                    "minCount": {
                        "type": ["integer", "null"]
                    }
                },
                "required": ["field", "term"]
            },
            "BboxQueryDTO": {
                "type": ["object", "null"],
                "properties": {
                    "bottomRightLat": {
                        "type": "number",
                        "minimum": -90,
                        "maximum": 90
                    },
                    "bottomRightLon": {
                        "type": "number",
                        "minimum": -180,
                        "maximum": 180
                    },
                    "topLeftLat": {
                        "type": "number",
                        "minimum": -90,
                        "maximum": 90
                    },
                    "topLeftLon": {
                        "type": "number",
                        "minimum": -180,
                        "maximum": 180
                    }
                },
                "required": ["bottomRightLat", "bottomRightLon", "topLeftLat", "topLeftLon"]
            },
            "PrecisionQueryDTO": {
                "type": ["object", "null"],
                "properties": {
                    "min": {
                        "type": ["number", "null"]
                    },
                    "max": {
                        "type": ["number", "null"]
                    }
                }
            },
            "DateLimitsDTO": {
                "type": ["object", "null"],
                "properties": {
                    "startDate": {
                        "type": ["string", "null"],
                        "format": "date-time"
                    },
                    "endDate": {
                        "type": ["string", "null"],
                        "format": "date-time"
                    }
                }
            },
            "ZRangeDTO": {
                "type": ["object", "null"],
                "properties": {
                    "min": {
                        "type": ["number", "null"]
                    },
                    "max": {
                        "type": ["number", "null"]
                    }
                }
            },
            "ValueQueryDTO": {
                "type": ["object", "null"],
                "properties": {
                    "op": {
                        "type": "number"
                    },
                    "operator": {
                        "type": "string",
                        "enum": ["Equal", "NotEqual", "Greater", "Less", "GreaterOrEqual", "LessOrEqual"]
                    }
                },
                "required": ["op", "operator"]
            }
        }
    }
}
